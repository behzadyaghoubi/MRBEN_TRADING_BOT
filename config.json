{
  "credentials": {
    "login": 1104123,
    "password": "-4YcBgRd",
    "server": "OxSecurities-Demo"
  },
  "trading": {
    "symbol": "XAUUSD.PRO",
    "timeframe": 15,
    "bars": 600,
    "magic_number": 20250721,
    "sessions": ["24h"],
    "max_spread_points": 180,
    "use_risk_based_volume": true,
    "fixed_volume": 0.02,
    "max_risk_volume_cap": 0.50,
    "sleep_seconds": 12,
    "retry_delay": 5,
    "consecutive_signals_required": 1,
    "lstm_timesteps": 60,
    "cooldown_seconds": 180,
    "deviation_points": 50
  },
  "risk": {
    "base_risk": 0.005,
    "min_lot": 0.01,
    "max_lot": 2.0,
    "max_open_trades": 2,
    "max_daily_loss": 0.02,
    "max_trades_per_day": 10,
    "sl_atr_multiplier": 1.3,
    "tp_atr_multiplier": 2.0
  },
  "advanced": {
    "swing_lookback": 12,
    "dynamic_spread_atr_frac": 0.10,
    "conformal_enabled": true,
    "regime_aware": true,
    "deviation_multiplier": 1.5,
    "reentry_window_seconds": 90,
    "startup_warmup_seconds": 90,
    "startup_min_conf": 0.62,
    "startup_min_score": 0.10,
    "inbar_eval_seconds": 10,
    "inbar_min_conf": 0.66,
    "inbar_min_score": 0.12
  },
  "conformal": {
    "enabled": true,
    "soft_gate": true,
    "emergency_bypass": false,
    "min_p": 0.10,
    "hard_floor": 0.0,
    "max_conf_bump": 0.03,
    "max_conf_bump_floor": 0.05,
    "extra_consecutive": 1,
    "extra_consec_floor": 2,
    "cap_final_thr": 0.90,
    "high_conf_override_margin": 0.02
  },
  "ai_control": {
    "mode": "shadow",
    "conformal_alpha": 0.10,
    "emergency_stop_threshold": 0.02,
    "kill_switch_threshold": 0.05,
    "max_consecutive_losses": 5,
    "tp_policy": {
      "split": true,
      "tp1_r": 0.8,
      "tp2_r": 1.5,
      "tp1_share": 0.5,
      "breakeven_after_tp1": true
    },
    "policy_learning": {
      "enabled": true,
      "update_frequency": 100,
      "learning_rate": 0.001
    }
  },
  "safety": {
    "news_block_enabled": false,
    "high_impact_block_minutes": 60,
    "weekend_trading": false,
    "holiday_trading": false
  },
  "tp_policy": {
    "split": true,
    "tp1_r": 0.8,
    "tp2_r": 1.5,
    "tp1_share": 0.5,
    "breakeven_after_tp1": true
  },
  "ml": {
    "lstm_timesteps": 60,
    "retrain_days": 3,
    "min_new_trades_to_retrain": 80,
    "prob_calibration": "isotonic",
    "accept_threshold": 0.60,
    "hold_threshold": 0.45
  },
  "flags": {
    "demo_mode": false
  },
  "logging": {
    "enabled": true,
    "level": "INFO",
    "log_file": "logs/trading_bot.log",
    "trade_log_path": "data/trade_log_gold.csv"
  },
  "models": {
    "use_rl": true,
    "use_lstm": true,
    "use_technical": true,
    "ml_filter_threshold": 0.5
  },
  "notifications": {
    "telegram_enabled": false,
    "email_enabled": false,
    "daily_summary": true
  },
  "agent": {
    "enabled": true,
    "mode": "guard",
    "auto_playbooks": ["RESTART_MT5", "MEM_CLEANUP", "RELOGIN_MT5", "SPREAD_ADAPT"],
    "alert": {
      "sink": "telegram",
      "token": "",
      "chat_id": ""
    },
    "error_rate_halt": 5,
    "memory_mb_halt": 2000,
    "max_recovery_attempts": 3,
    "spread_adapt_duration_minutes": 30,
    "data_gap_retry_count": 1000,
    "health_check_interval_seconds": 30,
    "cycle_time_threshold_seconds": 2.0
  },
  "advanced": {
    "use_ai_ensemble": false,
    "ai_min_prob": 0.55,
    "ai_weight": 0.4,
    "dynamic_spread_atr_frac": 0.10
  },
  "dashboard": {
    "enabled": true,
    "port": 8765
  }
}